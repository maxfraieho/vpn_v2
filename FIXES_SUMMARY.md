# –ü—ñ–¥—Å—É–º–æ–∫ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å VPN v2

## –û–≥–ª—è–¥ –ø—Ä–æ–±–ª–µ–º —Ç–∞ —Ä—ñ—à–µ–Ω—å

### üîß –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –ø–æ—Ä—Ç—ñ–≤ (8888, 8889)

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–æ—Ä—Ç–∏ –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏—Å—è —ñ–Ω—à–∏–º–∏ –ø—Ä–æ—Ü–µ—Å–∞–º–∏
- –í—ñ–¥—Å—É—Ç–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –ø–æ—Ä—Ç—ñ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

**–†—ñ—à–µ–Ω–Ω—è:**
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é `check_port_available()` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–æ—Ä—Ç—ñ–≤
- ‚úÖ –î–æ–¥–∞–Ω–æ `find_available_port()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É –≤—ñ–ª—å–Ω–∏—Ö –ø–æ—Ä—Ç—ñ–≤
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –ø–æ—Ä—Ç–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–±–∏—Ä–∞—î –Ω–∞—Å—Ç—É–ø–Ω–∏–π –≤—ñ–ª—å–Ω–∏–π –ø–æ—Ä—Ç —è–∫—â–æ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–∏–π –∑–∞–π–Ω—è—Ç–∏–π

**–§–∞–π–ª:** `smart_proxy_v2_fixed.py`

### üîß –ü—Ä–æ–±–ª–µ–º–∞ 2: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º–æ–¥—É–ª—è Playwright

**–ü—Ä–∏—á–∏–Ω–∞:**
- Playwright –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –≤ Termux
- Survey automation –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–ª–µ–∂–∞–ª–∞ –≤—ñ–¥ Playwright

**–†—ñ—à–µ–Ω–Ω—è:**
- ‚úÖ –ó–∞–º—ñ–Ω–µ–Ω–æ Playwright –Ω–∞ `requests` + `BeautifulSoup4`
- ‚úÖ –î–æ–¥–∞–Ω–æ –ø–∞—Ä—Å–∏–Ω–≥ HTML –¥–ª—è –ø–æ—à—É–∫—É —Ñ–æ—Ä–º —Ç–∞ –∫–Ω–æ–ø–æ–∫
- ‚úÖ –î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è cookies —á–µ—Ä–µ–∑ requests.Session
- ‚úÖ –ü—Ä–∞—Ü—é—î –≤ —Ä–µ–∂–∏–º—ñ "Simple Mode" –±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–Ω–æ—ó –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó

**–§–∞–π–ª:** `survey_automation_v2_fixed.py`

**–û–±–º–µ–∂–µ–Ω–Ω—è:**
- –ù–µ –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ JavaScript
- –ù–µ –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ —Å–∫–ª–∞–¥–Ω—É –≤–∑–∞—î–º–æ–¥—ñ—é (CAPTCHA, —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏)
- –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –±–∞–∑–æ–≤–æ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º

### üîß –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–ª–∞–±–∫–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
- PID —Ñ–∞–π–ª–∏ –Ω–µ –æ—á–∏—â–∞–ª–∏—Å—å –ø—Ä–∏ –ø–∞–¥—ñ–Ω–Ω—ñ –ø—Ä–æ—Ü–µ—Å—ñ–≤
- –ù–µ–º–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –ø—Ä–æ—Ü–µ—Å—ñ–≤
- –°–∫–ª–∞–¥–Ω–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏

**–†—ñ—à–µ–Ω–Ω—è:**
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é `check_process()` –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é PID
- ‚úÖ –î–æ–¥–∞–Ω–æ `kill_process()` –∑ graceful shutdown (SIGTERM ‚Üí SIGKILL)
- ‚úÖ –î–æ–¥–∞–Ω–æ `cleanup_old_processes()` –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –∫–æ–º–∞–Ω–¥—É `status` –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º –≤–∏–≤–æ–¥–æ–º
- ‚úÖ –î–æ–¥–∞–Ω–æ –∫–æ–º–∞–Ω–¥—É `logs` –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤ –∫–æ–∂–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É
- ‚úÖ –î–æ–¥–∞–Ω–æ –∫–æ–º–∞–Ω–¥—É `clean` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ—á–∏—â–µ–Ω–Ω—è

**–§–∞–π–ª:** `manager_v2_fixed.sh`

### üîß –ü—Ä–æ–±–ª–µ–º–∞ 4: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
- –°–∫–ª–∞–¥–Ω–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —á–æ–º—É —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î
- –ù–µ–º–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º–∏

**–†—ñ—à–µ–Ω–Ω—è:**
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –ø–æ–≤–Ω–∏–π –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∏–π —Å–∫—Ä–∏–ø—Ç
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—ñ–≤
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (Python –ø–∞–∫–µ—Ç–∏, —Å–∏—Å—Ç–µ–º–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –ø–æ—Ä—Ç—ñ–≤
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è (–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç, Tor, Tailscale)
- ‚úÖ –ê–Ω–∞–ª—ñ–∑ –ª–æ–≥—ñ–≤ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

**–§–∞–π–ª:** `diagnostic.sh`

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### smart_proxy_v2_fixed.py

```python
# –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –ø–æ—Ä—Ç—ñ–≤
2. –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
3. Timeout –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ (30 —Å–µ–∫—É–Ω–¥)
4. –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
5. Graceful shutdown
6. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –±—ñ–ª—å—à–µ HTTP –º–µ—Ç–æ–¥—ñ–≤
```

### survey_automation_v2_fixed.py

```python
# –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
1. –†–æ–±–æ—Ç–∞ –±–µ–∑ Playwright
2. –ü–∞—Ä—Å–∏–Ω–≥ HTML —Ñ–æ—Ä–º
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ñ–æ—Ä–º
4. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è cookies —á–µ—Ä–µ–∑ Session
5. –°—Ç–∞—Ç—É—Å endpoint (/status)
6. –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
7. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
```

### manager_v2_fixed.sh

```bash
# –ù–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏:
- start    # –ó–∞–ø—É—Å–∫ –∑ cleanup
- stop     # Graceful shutdown
- restart  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑ –æ—á–∏—â–µ–Ω–Ω—è–º
- status   # –ö–æ–ª—å–æ—Ä–æ–≤–∏–π —Å—Ç–∞—Ç—É—Å + –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- test     # –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ—É—Ç–∏–Ω–≥—É
- logs     # –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ (tor|proxy|survey)
- clean    # –†—É—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤

# –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ—Ü–µ—Å—ñ–≤
- –ö–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—ñ–≤ —á–µ—Ä–µ–∑ netstat
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Tor –∑'—î–¥–Ω–∞–Ω–Ω—è
```

### diagnostic.sh

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏:
1. [1/6] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–∞–π–ª—ñ–≤
2. [2/6] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
3. [3/6] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—ñ–≤
4. [4/6] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤
5. [5/6] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è
6. [6/6] –ê–Ω–∞–ª—ñ–∑ –ª–æ–≥—ñ–≤

# –í–∏–≤—ñ–¥:
- –ó–µ–ª–µ–Ω–∏–π ‚úì - –≤—Å–µ OK
- –ß–µ—Ä–≤–æ–Ω–∏–π ‚úó - –ø—Ä–æ–±–ª–µ–º–∞
- –ñ–æ–≤—Ç–∏–π ‚óã - –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
```

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è: –î–æ vs –ü—ñ—Å–ª—è

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

‚ùå –ü–æ—Ä—Ç–∏ 8888/8889 –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è (address already in use)
‚ùå Survey automation –ø–∞–¥–∞—î (No module named 'playwright')
‚ùå PID —Ñ–∞–π–ª–∏ –Ω–µ –æ—á–∏—â–∞—é—Ç—å—Å—è
‚ùå –°–∫–ª–∞–¥–Ω–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏
‚ùå –ù–µ–º–∞—î graceful shutdown
‚ùå –õ–æ–≥–∏ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –≤—ñ–ª—å–Ω–∏—Ö –ø–æ—Ä—Ç—ñ–≤
‚úÖ Survey automation –ø—Ä–∞—Ü—é—î –±–µ–∑ playwright
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è PID —Ñ–∞–π–ª—ñ–≤
‚úÖ –ü–æ–≤–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏
‚úÖ Graceful shutdown –ø—Ä–æ—Ü–µ—Å—ñ–≤
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –ª–æ–≥–∏ –∑ —Ä—ñ–≤–Ω—è–º–∏

## –ù–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### Python –ø–∞–∫–µ—Ç–∏:

```bash
pip install aiohttp aiohttp-socks requests beautifulsoup4 lxml
```

**–©–æ –∑–∞–º—ñ–Ω–µ–Ω–æ:**
- ~~playwright~~ ‚Üí `requests` + `beautifulsoup4`

**–î–æ–¥–∞–Ω–æ:**
- `beautifulsoup4` - –ø–∞—Ä—Å–∏–Ω–≥ HTML
- `lxml` - —à–≤–∏–¥–∫–∏–π –ø–∞—Ä—Å–µ—Ä –¥–ª—è BeautifulSoup

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
~/vpn_v2/
‚îú‚îÄ‚îÄ config.json                          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ torrc                                # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Tor
‚îÇ
‚îú‚îÄ‚îÄ smart_proxy_v2.py                    # –û—Ä–∏–≥—ñ–Ω–∞–ª (backup)
‚îú‚îÄ‚îÄ smart_proxy_v2_fixed.py             # ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–ê –í–ï–†–°–Ü–Ø
‚îÇ
‚îú‚îÄ‚îÄ survey_automation_v2.py              # –û—Ä–∏–≥—ñ–Ω–∞–ª (backup)
‚îú‚îÄ‚îÄ survey_automation_v2_fixed.py       # ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–ê –í–ï–†–°–Ü–Ø
‚îÇ
‚îú‚îÄ‚îÄ manager_v2.sh                        # –û—Ä–∏–≥—ñ–Ω–∞–ª (backup)
‚îú‚îÄ‚îÄ manager_v2_fixed.sh                 # ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–ê –í–ï–†–°–Ü–Ø
‚îÇ
‚îú‚îÄ‚îÄ diagnostic.sh                        # ‚úÖ –ù–û–í–ò–ô –§–ê–ô–õ
‚îú‚îÄ‚îÄ quick_fix.sh                        # ‚úÖ –ù–û–í–ò–ô –§–ê–ô–õ
‚îÇ
‚îú‚îÄ‚îÄ proxy.log                            # –õ–æ–≥–∏ –ø—Ä–æ–∫—Å—ñ
‚îú‚îÄ‚îÄ survey.log                           # –õ–æ–≥–∏ survey
‚îú‚îÄ‚îÄ tor.log                              # –õ–æ–≥–∏ Tor
‚îÇ
‚îú‚îÄ‚îÄ *.pid                                # PID —Ñ–∞–π–ª–∏ (—Ç–∏–º—á–∞—Å–æ–≤—ñ)
‚îî‚îÄ‚îÄ tor_data/                            # –î–∞–Ω—ñ Tor
```

## –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç:

```bash
cd ~/vpn_v2

# 1. –®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –æ—á–∏—â–∞—î, –∑–∞–ø—É—Å–∫–∞—î)
./quick_fix.sh

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
./manager_v2_fixed.sh status

# 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ—É—Ç–∏–Ω–≥—É
./manager_v2_fixed.sh test
```

### –î–µ—Ç–∞–ª—å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

```bash
# –ü–æ–≤–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
./diagnostic.sh all

# –û–∫—Ä–µ–º—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
./diagnostic.sh files   # –¢—ñ–ª—å–∫–∏ —Ñ–∞–π–ª–∏
./diagnostic.sh deps    # –¢—ñ–ª—å–∫–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
./diagnostic.sh ports   # –¢—ñ–ª—å–∫–∏ –ø–æ—Ä—Ç–∏
./diagnostic.sh conn    # –¢—ñ–ª—å–∫–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è
```

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–∞–º–∏:

```bash
# –ó–∞–ø—É—Å–∫
./manager_v2_fixed.sh start

# –ó—É–ø–∏–Ω–∫–∞
./manager_v2_fixed.sh stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./manager_v2_fixed.sh restart

# –°—Ç–∞—Ç—É—Å
./manager_v2_fixed.sh status

# –õ–æ–≥–∏
./manager_v2_fixed.sh logs proxy
./manager_v2_fixed.sh logs survey
./manager_v2_fixed.sh logs tor

# –û—á–∏—â–µ–Ω–Ω—è
./manager_v2_fixed.sh clean
```

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

### Survey Automation API:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
curl http://127.0.0.1:8090/status

# –í—ñ–¥–ø—Ä–∞–≤–∫–∞ survey –∑–∞–ø–∏—Ç—É
curl -X POST http://127.0.0.1:8090/survey \
  -H "Content-Type: application/json" \
  -d '{
    "email": "arsen.k111999@gmail.com",
    "url": "https://www.meinungsplatz.ch/survey/123",
    "reward": 100
  }'
```

### Proxy —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

```bash
# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—É 8888 (Tailscale)
curl -x http://127.0.0.1:8888 https://ipapi.co/json/

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—É 8889 (Tor)
curl -x http://127.0.0.1:8889 https://ipapi.co/json/

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä—ñ–∑–Ω–∏—Ö IP
curl -s -x http://127.0.0.1:8888 https://ipapi.co/ip
curl -s -x http://127.0.0.1:8889 https://ipapi.co/ip
```

## –í–∏—Ä—ñ—à–µ–Ω–Ω—è —Ç–∏–ø–æ–≤–∏—Ö –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤—ñ—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É
./diagnostic.sh all

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
./manager_v2_fixed.sh logs proxy
./manager_v2_fixed.sh logs survey

# 3. –û—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
./manager_v2_fixed.sh clean
./manager_v2_fixed.sh start
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç–∏ –∑–∞–π–Ω—è—Ç—ñ

```bash
# –ó–Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å
lsof -i:8888

# –í–±–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å
kill -9 <PID>

# –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ clean
./manager_v2_fixed.sh clean
```

### –ü—Ä–æ–±–ª–µ–º–∞: Tor –Ω–µ –ø—Ä–∞—Ü—é—î

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Tor
curl --socks5 127.0.0.1:9050 https://check.torproject.org/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Tor
pkill -f "tor -f"
tor -f ~/vpn_v2/torrc &

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥
tail -f ~/vpn_v2/tor.log
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–º–∏–ª–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install --upgrade aiohttp aiohttp-socks requests beautifulsoup4 lxml

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
python3 -c "import aiohttp, aiohttp_socks, requests, bs4"
```

## –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

### Survey Automation (—Ä–µ–∂–∏–º Simple):

**–ü—Ä–∞—Ü—é—î:**
- ‚úÖ –ë–∞–∑–æ–≤–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- ‚úÖ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º (GET/POST)
- ‚úÖ Cookies —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- ‚úÖ –ü—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Tor/Tailscale

**–ù–µ –ø—Ä–∞—Ü—é—î:**
- ‚ùå JavaScript –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- ‚ùå CAPTCHA –æ–±—Ö—ñ–¥
- ‚ùå –°–∫–ª–∞–¥–Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –∑ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏
- ‚ùå Screenshot/PDF –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –ø–æ—Ä—Ç—ñ–≤:

- –Ø–∫—â–æ –ø–æ—Ä—Ç 8888 –∑–∞–π–Ω—è—Ç–∏–π ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è 8889
- –Ø–∫—â–æ 8889 –∑–∞–π–Ω—è—Ç–∏–π ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è 8890
- –Ü —Ç–∞–∫ –¥–∞–ª—ñ (–¥–æ 100 —Å–ø—Ä–æ–±)
- **–í–∞–∂–ª–∏–≤–æ:** –û–Ω–æ–≤—ñ—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—Ä–∞—É–∑–µ—Ä–∞ –∑ –Ω–æ–≤–∏–º–∏ –ø–æ—Ä—Ç–∞–º–∏!

### –õ–æ–≥—É–≤–∞–Ω–Ω—è:

- –í—Å—ñ –ª–æ–≥–∏ –≤ `~/vpn_v2/*.log`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è - –Ω–µ–º–∞—î
- –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ –æ—á–∏—â–∞—Ç–∏ —Å—Ç–∞—Ä—ñ –ª–æ–≥–∏:
  ```bash
  > ~/vpn_v2/proxy.log
  > ~/vpn_v2/survey.log
  > ~/vpn_v2/tor.log
  ```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ —è–∫—â–æ:

```bash
./manager_v2_fixed.sh status
```

–ü–æ–∫–∞–∑—É—î:
```
‚úì Tor running (PID xxx)
  Country: CH

‚úì Smart Proxy running (PID xxx)
  Port 8888: listening
  Port 8889: listening

‚úì Survey Automation running (PID xxx)
  Port 8090: listening
```

–Ü —Ç–µ—Å—Ç –ø–æ–∫–∞–∑—É—î:
```bash
./manager_v2_fixed.sh test
```

```
Checking Tor connection:
  "ip": "185.xxx.xxx.xxx"
  "country": "CH"

Testing proxy ports:
Port 8888:
  "ip": "100.100.74.9"
  "country": "CH"
‚úì Working

Port 8889:
  "ip": "185.yyy.yyy.yyy"  # –Ü–Ω—à–∏–π IP!
  "country": "CH"
‚úì Working
```

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø–æ–≤–Ω—É –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `./diagnostic.sh all`
2. –ó–±–µ—Ä—ñ—Ç—å –ª–æ–≥–∏: `tar -czf logs.tar.gz *.log`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é: `cat config.json`
4. –û–ø–∏—à—ñ—Ç—å –ø—Ä–æ–±–ª–µ–º—É –∑ –≤–∏–≤–æ–¥–æ–º –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## Changelog

### v2.1 (Fixed) - 2025-10-22

- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –ø–æ—Ä—Ç—ñ–≤
- ‚úÖ –ó–∞–º—ñ–Ω–µ–Ω–æ Playwright –Ω–∞ requests
- ‚úÖ –î–æ–¥–∞–Ω–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏
- ‚úÖ –î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- ‚úÖ –î–æ–¥–∞–Ω–æ graceful shutdown

### v2.0 (Original) - 2025-10-22

- Multi-IP routing
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Tor —Ç–∞ Tailscale
- Survey automation –∑ Playwright
- –ë–∞–∑–æ–≤–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–∞–º–∏