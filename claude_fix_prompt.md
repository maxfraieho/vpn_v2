# Промт для Claude Code: Вирішення проблем системи VPN v2

## Опис системи

У мене є система VPN v2, яка має кілька компонентів:
1. Tor сервіс (працює на порті 9050)
2. Smart Proxy v2 (має працювати на портах 8888, 8889)
3. Survey Automation v2 (має працювати на порті 8090)

## Поточний стан та проблеми

### 1. Tor сервіс
- ✅ Працює стабільно
- ✅ Надає SOCKS5 проксі на порті 9050
- ✅ Маршрутизує трафік через Швейцарію (IP: 100.100.74.9)
- ✅ Підтверджено роботу з швейцарським IP

### 2. Smart Proxy v2 (Проблеми)
- ❌ Не стартує через помилку: "OSError: [Errno 98] error while attempting to bind on address ('0.0.0.0', 8888): [errno 98] address already in use"
- ❌ Працює тільки Tor сервіс, але не проксі на 8888/8889
- ❌ Немає доступу до веб-інтерфейсу проксі з браузерів
- ❌ Файл конфігурації: config.json містить налаштування для двох облікових записів:
  - arsen.k111999@gmail.com (порт 8888, маршрутизація через Tailscale)
  - lekov00@gmail.com (порт 8889, маршрутизація через Tor)

### 3. Survey Automation v2 (Проблеми)
- ❌ Не працює через відсутність модуля: "ModuleNotFoundError: No module named 'playwright'"
- ❌ Встановлення playwright не вдається в середовищі Termux

## Потрібні виправлення

### Для Smart Proxy v2:
1. Вирішити проблему з конфліктом портів (address already in use)
2. Переконатися, що проксі може запускатися одночасно з Tor
3. Перевірити, чи правильно проксі читає config.json
4. Забезпечити, щоб проксі працював з обома обліковими записами одночасно
5. Додати логіку для вибору вільного порту якщо основний зайнятий
6. Забезпечити відповідну обробку помилок

### Для Survey Automation v2:
1. Вирішити проблему з відсутністю playwright
2. Знайти альтернативу playwright для автоматизації браузера
3. Або переписати сервіс без використання playwright
4. Забезпечити сумісність з Termux середовищем

### Для manager_v2.sh:
1. Виправити логіку визначення статусу сервісів
2. Забезпечити правильне відстеження PID файлів
3. Додати належну обробку помилок запуску

### Загальні вдосконалення:
1. Додати детальну логіку для діагностики проблем
2. Створити детальніший файл документації
3. Забезпечити стабільність запуску всіх сервісів
4. Розглянути можливість автоматичного вибору портів, якщо основні зайняті
5. Додати механізм для тестування роботи всіх сервісів після запуску

## Конфігураційні файли
- config.json: містить налаштування для облікових записів та портів
- torrc: налаштування Tor
- manager_v2.sh: менеджер сервісів
- smart_proxy_v2.py: основний проксі сервіс
- survey_automation_v2.py: сервіс автоматизації опитувань

## Потрібна допомога

Будь ласка, вирішіть ці проблеми, щоб досягти:
1. Повної функціональності всіх трьох сервісів одночасно
2. Стабільної роботи проксі на призначених портах 8888/8889
3. Робочого сервісу автоматизації опитувань або його альтернативи
4. Надійної системи управління та моніторингу всіх сервісів
5. Відповідної обробки помилок та конфліктів портів